<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<style>
			#myDiv {
				height:100%;
				width:100%;
				margin-left: auto;
				margin-right: auto;
				display: block;
			}
			#cropcontainer {
				width:  auto; 
				height: 100%; 
				margin-left: auto;
				margin-right: auto;
				display: block;
			}
		</style>

		<script type="text/javascript" language="javascript">
			function getGif() {
				var oRequest = new XMLHttpRequest();
				var sURL = "gifs.json";
				oRequest.open("GET",sURL,false);
				oRequest.send(null)

				if (oRequest.status==200) {
					var response = oRequest.responseText;
					var parsed = eval("(function(){return " + response + ";})()");
					var index=Math.floor(Math.random()*(parsed.gifs.length-1));
					return parsed.gifs[index];
					//alert(parsed.gifs[index]);
				} else alert("Error executing XMLHttpRequest call!");
			}
			
			function getImageUrl(img) {
		  	 var imageSrc = getGif();
		 	  if(img.src != imageSrc) { // don't get stuck in an endless loop
			  img.src = imageSrc;
			   }
			}
		</script>
		<title>ALL the gifs!</title>
	</head>
	<body>
		<div id='myDiv'>
		<img src="tgif.gif" id='cropcontainer' onload="getImageUrl(this)" />
		</div>
	</body>
</html>
